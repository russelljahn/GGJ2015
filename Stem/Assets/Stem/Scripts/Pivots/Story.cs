using System;using System.Collections.Generic;using Assets.Stem.Scripts.Audio;using Assets.Stem.Scripts.PropertyAttributes;using UnityEngine;namespace Assets.Stem.Scripts.Pivots {    public class Story {        private readonly Dictionary<string, Pivot> _idsToPivots = new Dictionary<string, Pivot>();        [SerializeField, Readonly] public Pivot Root;         public Story() {            var pivots = GeneratePivots();            foreach (var pivot in pivots) {                if (pivot.Id == PivotIds.StoryRoot) {                    Root = pivot;                }                if (_idsToPivots.ContainsKey(pivot.Id)) {                    Debug.LogWarning(string.Format("Pivot '{0}' contains duplicate id '{1}'!", pivot.Description, pivot.Id));                }                _idsToPivots[pivot.Id] = pivot;            }        }        public Pivot GetPivot(string id) {            if (!_idsToPivots.ContainsKey(id)) {                throw new ArgumentException("There is no pivot with id!");            }            return _idsToPivots[id];        }        private IEnumerable<Pivot> GeneratePivots() {            return new List<Pivot> {                new Pivot {                    Id = PivotIds.StoryRoot,                    Description = "There is a flower.",                    Choices = new List<Choice> {                        new Choice {                            Description = "Water it.",                            NextPivot = PivotIds.Puddle,                            OnTriggerAnimationName = Animations.WaterFlower,                        },                        new Choice {                            Description = "Stomp on it.",                            NextPivot = PivotIds.FlowerSprout,                            OnTriggerAnimationName = Animations.BootStomp,                        }                    }                },                new Pivot {                    Id = PivotIds.Puddle,                    Description = "You overwatered the poor thing. There's only a puddle now.",                    Choices = new List<Choice> {                        new Choice {                            Description = "Pee in it.",                            NextPivot = PivotIds.PeePuddle,                            OnTriggerAnimationName = Animations.Pee,                        },                        new Choice {                            Description = "Drink it.",                            NextPivot = PivotIds.RumblyTummy,                            OnTriggerAnimationName = Animations.DrinkWater,                        }                    }                },                new Pivot {                    Id = PivotIds.PeePuddle,                    Description = "Now the puddle is yellow.",                    Choices = new List<Choice> {                        new Choice {                            Description = "Drink it.",                            NextPivot = PivotIds.RumblyTummy,                            OnTriggerAnimationName = Animations.DrinkPee,                        },                        new Choice {                            Description = "Share it with a friend.",                            NextPivot = PivotIds.FriendDies,                            OnTriggerAnimationName = Animations.FriendDrink,                        }                    }                },                new Pivot {                    Id = PivotIds.RumblyTummy,                    Description = "You feel a rumbly in your tummy.",                    Choices = new List<Choice> {                        new Choice {                            Description = "Go to the hospital.",                            NextPivot = PivotIds.GotEbola,                            OnTriggerAnimationName = Animations.GotEbola,                        },                        new Choice {                            Description = "Go home and sleep it off.",							NextPivot = PivotIds.StoryRoot,                            OnTriggerAnimationName = Animations.Grave,                        }                    }                },                new Pivot {                    Id = PivotIds.GotEbola,                    Description = "You were diagnosed with Ebola.",                    Choices = new List<Choice> {                        new Choice {                            Description = "Infect others.",                            NextPivot = PivotIds.TerriblePerson,                            OnTriggerAnimationName = Animations.God,                        },                        new Choice {                            Description = "Do the right thing.",                            NextPivot = PivotIds.StoryRoot,                            OnTriggerAnimationName = Animations.Grave,                        }                    }                },                new Pivot {                    Id = PivotIds.FriendDies,                    Description = "Your friend dies.",                    Choices = new List<Choice> {                        new Choice {                            Description = "Bury the body.",                            NextPivot = PivotIds.FlowerSprout,                            OnTriggerAnimationName = Animations.FlowersSprout,                        },                        new Choice {                            Description = "Eat the body.",                            OnTriggerAnimationName = Animations.God,                            NextPivot = PivotIds.TerriblePerson,                        }                    }                },                new Pivot {                    Id = PivotIds.FlowerMutates,                    Description = "The flower mutates into a talking Venus Flytrap.",                    Choices = new List<Choice> {                        new Choice {                            Description = "Be friends.",                            NextPivot = PivotIds.StoryRoot,                            OnTriggerAnimationName = Animations.Grave,                        },                        new Choice {                            Description = "Be lovers.",                            NextPivot = PivotIds.StoryRoot,                            OnTriggerAnimationName = Animations.BeLovers,                        }                    }                },                new Pivot {                    Id = PivotIds.BeeUtopia,                    Description = "The flowers have become a utopia for bees.",                    Choices = new List<Choice> {                        new Choice {                            Description = "Dance with them.",                            NextPivot = PivotIds.GotEbola,                            OnTriggerAnimationName = Animations.GetStung,                        },                        new Choice {                            Description = "Experiment on them.",                            NextPivot = PivotIds.Experiment,                            OnTriggerAnimationName = Animations.BeeExperiment,                        }                    }                },                new Pivot {                    Id = PivotIds.GetStung,                    Description = "You got stung.",                    Choices = new List<Choice> {                        new Choice {                            Description = "Go to the hospital.",                            NextPivot = PivotIds.GotEbola,                            OnTriggerAnimationName = Animations.GotEbola,                        },                        new Choice {                            Description = "Go home and sleep it off.",                            NextPivot = PivotIds.StoryRoot,                            OnTriggerAnimationName = Animations.Grave,                        }                    }                },                new Pivot {                    Id = PivotIds.Experiment,                    Description = "Genetic splicing makes the bees human-sized.",                    Choices = new List<Choice> {                        new Choice {                            Description = "The bees travel the stars.",                            NextPivot = PivotIds.StoryRoot,                            OnTriggerAnimationName = Animations.SpaceBees,                        },                        new Choice {                            Description = "They remain on Earth.",                            NextPivot = PivotIds.GetStung,                            OnTriggerAnimationName = Animations.GetStung,                        },                    }                },				new Pivot {					Id = PivotIds.TerriblePerson,					Description = "You're a terrible person! Where should I banish you?",					Choices = new List<Choice> {						new Choice {							Description = "Purgatory.",							NextPivot = PivotIds.GetStung,                            OnTriggerAnimationName = Animations.GetStung,						},						new Choice {							Description = "Hell.",							NextPivot = PivotIds.StoryRoot,                            OnTriggerAnimationName = Animations.BaconWitch,						},					}				},				new Pivot {					Id = PivotIds.FlowerSprout,					Description = "What are you gonna do now?",					Choices = new List<Choice> {						new Choice {							Description = "Pesticide?",							NextPivot = PivotIds.FlowerMutates,                            OnTriggerAnimationName = Animations.Pesticide,						},						new Choice {							Description = "Let them grow.",							NextPivot = PivotIds.BeeUtopia,                            OnTriggerAnimationName = Animations.BeeUtopia,						},					}				},            };        }    }}